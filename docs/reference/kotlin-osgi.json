[{"type": "a", "text": "\n\nEdit Page\n"}, {"type": "i", "text": ""}, {"type": "span", "text": "Edit Page"}, {"type": "h1", "text": "Kotlin and OSGi"}, {"type": "p", "text": "To enable Kotlin OSGi support you need to include kotlin-osgi-bundle instead of regular Kotlin libraries.\nIt is recommended to remove kotlin-runtime, kotlin-stdlib and kotlin-reflect dependencies as kotlin-osgi-bundle\nalready contains all of them. You also should pay attention in case when external Kotlin libraries are included.\nMost regular Kotlin dependencies are not OSGi-ready, so you shouldn't use them and should remove them from your project."}, {"type": "code", "text": "kotlin-osgi-bundle"}, {"type": "code", "text": "kotlin-runtime"}, {"type": "code", "text": "kotlin-stdlib"}, {"type": "code", "text": "kotlin-reflect"}, {"type": "code", "text": "kotlin-osgi-bundle"}, {"type": "h2", "text": "Maven"}, {"type": "p", "text": "To include the Kotlin OSGi bundle to a Maven project:"}, {"type": "div", "text": "\n<dependencies>\n    <dependency>\n        <groupId>org.jetbrains.kotlin</groupId>\n        <artifactId>kotlin-osgi-bundle</artifactId>\n        <version>${kotlin.version}</version>\n    </dependency>\n</dependencies>\n\n"}, {"type": "pre", "text": "<dependencies>\n    <dependency>\n        <groupId>org.jetbrains.kotlin</groupId>\n        <artifactId>kotlin-osgi-bundle</artifactId>\n        <version>${kotlin.version}</version>\n    </dependency>\n</dependencies>\n"}, {"type": "code", "text": "<dependencies>\n    <dependency>\n        <groupId>org.jetbrains.kotlin</groupId>\n        <artifactId>kotlin-osgi-bundle</artifactId>\n        <version>${kotlin.version}</version>\n    </dependency>\n</dependencies>\n"}, {"type": "p", "text": "To exclude the standard library from external libraries (notice that \"star exclusion\" works in Maven 3 only):"}, {"type": "div", "text": "\n<dependency>\n    <groupId>some.group.id</groupId>\n    <artifactId>some.library</artifactId>\n    <version>some.library.version</version>\n\n    <exclusions>\n        <exclusion>\n            <groupId>org.jetbrains.kotlin</groupId>\n            <artifactId>*</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n\n"}, {"type": "pre", "text": "<dependency>\n    <groupId>some.group.id</groupId>\n    <artifactId>some.library</artifactId>\n    <version>some.library.version</version>\n\n    <exclusions>\n        <exclusion>\n            <groupId>org.jetbrains.kotlin</groupId>\n            <artifactId>*</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n"}, {"type": "code", "text": "<dependency>\n    <groupId>some.group.id</groupId>\n    <artifactId>some.library</artifactId>\n    <version>some.library.version</version>\n\n    <exclusions>\n        <exclusion>\n            <groupId>org.jetbrains.kotlin</groupId>\n            <artifactId>*</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n"}, {"type": "h2", "text": "Gradle"}, {"type": "p", "text": "To include kotlin-osgi-bundle to a gradle project:"}, {"type": "code", "text": "kotlin-osgi-bundle"}, {"type": "div", "text": "\ncompile \"org.jetbrains.kotlin:kotlin-osgi-bundle:$kotlinVersion\"\n\n"}, {"type": "pre", "text": "compile \"org.jetbrains.kotlin:kotlin-osgi-bundle:$kotlinVersion\"\n"}, {"type": "code", "text": "compile \"org.jetbrains.kotlin:kotlin-osgi-bundle:$kotlinVersion\"\n"}, {"type": "p", "text": "To exclude default Kotlin libraries that comes as transitive dependencies you can use the following approach:"}, {"type": "div", "text": "\ndependencies {\n compile (\n   [group: 'some.group.id', name: 'some.library', version: 'someversion'],\n   .....) {\n  exclude group: 'org.jetbrains.kotlin'\n}\n\n"}, {"type": "pre", "text": "dependencies {\n compile (\n   [group: 'some.group.id', name: 'some.library', version: 'someversion'],\n   .....) {\n  exclude group: 'org.jetbrains.kotlin'\n}\n"}, {"type": "code", "text": "dependencies {\n compile (\n   [group: 'some.group.id', name: 'some.library', version: 'someversion'],\n   .....) {\n  exclude group: 'org.jetbrains.kotlin'\n}\n"}, {"type": "h2", "text": "FAQ"}, {"type": "h4", "text": "Why not just add required manifest options to all Kotlin libraries"}, {"type": "p", "text": "Even though it is the most preferred way to provide OSGi support, unfortunately it couldn't be done for now due to so called\n\"package split\" issue that couldn't be easily eliminated and such a big change is\nnot planned for now. There is Require-Bundle feature but it is not the best option too and not recommended to use.\nSo it was decided to make a separate artifact for OSGi."}, {"type": "a", "text": "\"package split\" issue"}, {"type": "code", "text": "Require-Bundle"}]